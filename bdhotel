

-- tabla huespedes
CREATE TABLE IF NOT EXISTS huespedes (
  dni TEXT PRIMARY KEY,
  nombre_completo TEXT NOT NULL,
  correo_electronico TEXT NOT NULL,
  nacionalidad TEXT,
  telefono TEXT
);

-- tabla habitaciones
CREATE TABLE IF NOT EXISTS habitaciones (
  numero_unico INTEGER PRIMARY KEY,
  tipo_habitacion TEXT NOT NULL,
  tarifa_por_noche INTEGER NOT NULL CHECK (tarifa_por_noche > 0),
  piso INTEGER NOT NULL CHECK (piso > 0),
  caracteristicas_especiales TEXT
);

-- tabla servicios_extras
CREATE TABLE IF NOT EXISTS servicios_extras (
  id_servicio INTEGER PRIMARY KEY,
  nombre TEXT NOT NULL,
  costo INTEGER NOT NULL CHECK (costo > 0),
  descripcion TEXT
);

-- tabla reservaciones
CREATE TABLE IF NOT EXISTS reservaciones (
  id_reserva TEXT PRIMARY KEY,
  dni_huesped TEXT NOT NULL REFERENCES huespedes(dni) ON DELETE CASCADE,
  numero_habitacion INTEGER REFERENCES habitaciones(numero_unico) ON DELETE SET NULL,
  fecha_entrada DATE NOT NULL,
  fecha_de_salida DATE NOT NULL,
  estado_pago TEXT NOT NULL CHECK (estado_pago IN ('pendiente','pagado','cancelado')),
  numero_huespedes INTEGER CHECK (numero_huespedes > 0),
  fecha_solicitud TEXT NOT NULL DEFAULT (datetime('now')),
  CONSTRAINT fecha_salida_gt_entrada CHECK (fecha_de_salida > fecha_entrada)
);
